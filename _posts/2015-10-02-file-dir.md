---
layout: post
title: 文件和路径操作
tags:  文件、路径
categories: PHP
---

###基本文件的操作

文件的基本操作有：文件判断、目录判断、文件大小、读写性判断、存在性判断及文件时间等

{% highlight php startinline linenos %} 
	<?php
	header("content-type","text/html;charset=utf-8");

    /*
     * 声明一个函数，传入文件名获取文件属性
	 * @param string $fileName 文件名称
	 */
	function getFilePro($fileName)
	{
		if(!file_exists($fileName))
		{
			echo '文件不存在<br/>';
			return;
		}

	/*是否是普通文件*/
	if(is_file($fileName))
	{
		 echo $fileName.'是一个文件<br/>';
	}

	/*是否是目录*/
	if(is_dir($fileName))
	{
		echo $fileName.'是一个目录';
	}

	/*输出文件的型态*/

	echo '文件型态是：'.getFileType($fileName).'<br/>';

	/*文件大小,转换单位*/
	echo '文件大小是：'.getFileSize(filesize($fileName)).'<br/>';

	/*文件是否可读*/
	if(is_readable($fileName))
	{
		echo '文件可读<br/>';
	}

	/*文件是否可写*/
	if(is_writable($fileName))
	{
		echo '文件可写<br/>';
	}

	/*文件是否可执行*/
	if(is_executable($fileName))
	{
		echo '文件可执行<br/>';
	}
	echo '文件创立时间：'.date('Y年m月j日',filectime($fileName)).'<br/>';
	echo '文件最后修改时间：'.date('Y年m月j日',filemtime($fileName)).'<br/>';
	echo '文件最后打开时间：'.date('Y年m月j日',fileatime($fileName)).'<br/>';
{% endhighlight %}


###目录的操作

目录的操作有：遍历目录、删除、复制、大小统计等

####遍历目录

{% highlight php startinline linenos %}

	/*
	 *遍历目录
	 *@param string $dirName 目录名
	 */
	 function findDir($dirName)
	 {
	     $num  = 0;  /*统计子文件个数*/
	     $dir_handle = opendir($dirName);  /*打开目录*/
	     /*输出目录文件*/
	     echo '<table border="0" align="center" width="600" cellspacing="0" cellpadding="0">';
	     echo '<caption><h2>目录'.$dirName.'下的文件</h2></caption>';
	     echo '<tr align="left" bgcolor="#cccccc"';
	     echo '<th>文件名</th><th>文件大小</th><th>文件类型</th><th>修改时间</th></tr>';
		
		 while($file = readdir($dir_handle))
		 {
		      $dirFile = $dirName.'/'.$file;
		      $bgcolor = $num++%2==0?'#ffffff':'#cccccc';
		      echo '<tr bgcolor='.$bgcolor.'>';
		      echo '<td>'.$file.'</td>';
		      echo '<td>'.filesize($dirFile).'</td>';
		      echo '<td>'.filetype($dirFile).'</td>';
		      echo '<td>'.date('Y/n/t',filemtime($dirFile)).'</td>';
		      echo '</tr>';
		  }
		  echo "</table>";
		  closedir($dir_handle);  /*关闭目录*/
		  echo "在<b>".$dirName."</b>目录下共有<b>".$num.'</b>个子文件';
	  }
{% endhighlight %}